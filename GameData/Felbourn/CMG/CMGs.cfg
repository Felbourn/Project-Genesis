
@PART[*]:HAS[@MODULE[ModuleReactionWheel]]:AFTER[zPhase1Init]
{
	%ACTIONS
	{
		action = remove ModuleReactionWheel
	}
	!MODULE[ModuleReactionWheel],* {} // will add some back by hand with reduced strength
	!MODULE[ModuleTweakableReactionWheel] {}
}

@PART[*]:HAS[@VARS:HAS[#torque_dia[*]]]:AFTER[zPhase1Init]
{
	%ACTIONS
	{
		action = add ModuleReactionWheel
	}
	MODULE
	{
		name = ModuleReactionWheel

		PitchTorque = #$/VARS/torque_dia$
		@PitchTorque *= #$@MM_VARS/DiamToRadius$
		@PitchTorque != #$@MM_VARS/Squared$
		@PitchTorque *= #$@MM_VARS/PI$
		@PitchTorque *= #$/VARS/torque_hgt$
		@PitchTorque *= #$@MM_VARS/TorquePerM3$

		YawTorque = #$PitchTorque$
		RollTorque = #$PitchTorque$
	}	
	@MODULE[ModuleReactionWheel]
	{
		RESOURCE
		{
			name = ElectricCharge
			rate = #$/MODULE[ModuleReactionWheel]/PitchTorque$
			@rate *= #$@MM_VARS/WattsPerTorque$
			@rate /= #$@MM_VARS/SecondsPerHour$
		}
	}
	%MODULE[ModuleTweakableReactionWheel] {}
}
