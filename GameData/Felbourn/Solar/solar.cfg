
@PART[*]:HAS[@MODULE[ModuleDeployableSolarPanel]|@MODULE[ModuleCurvedSolarPanel]]
{
	%ACTIONS
	{
		action = clear solar chargeRate
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		oldChargeRate = #$chargeRate$
		@chargeRate = 0
	}
	@MODULE[ModuleCurvedSolarPanel]
	{
		oldChargeRate = #$chargeRate$
		@TotalEnergyRate = 0
	}
}

@PART[*]:HAS[#solar_len[*]]:Final
{
	%ACTIONS
	{
		action = edit ModuleDeployableSolarPanel
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = #$/solar_len$
		@chargeRate *= #$/solar_wid$
		@chargeRate *= #$/solar_parts$
		@chargeRate *= #$@MM_VARS/WattsPerM2$
		@chargeRate /= #$@MM_VARS/SecondsPerHour$
	}
}
@PART[*]:HAS[#solar_dia[*]]:Final
{
	%ACTIONS
	{
		action = edit ModuleCurvedSolarPanel
	}
	@MODULE[ModuleCurvedSolarPanel]
	{
		@TotalEnergyRate = #$/solar_dia$
		@TotalEnergyRate *= #$@MM_VARS/PI$
		@TotalEnergyRate *= #$/solar_hgt$
		@TotalEnergyRate *= #$/solar_parts$
		@TotalEnergyRate /= #$/solar_arcs$
		@TotalEnergyRate *= #$@MM_VARS/WattsPerM2$
		@TotalEnergyRate /= #$@MM_VARS/SecondsPerHour$
	}
}
