
@PART[*]:HAS[@SOLAR[Rect]]:AFTER[zPhase4Electric]
{
	%ACTIONS
	{
		action = add ModuleDeployableSolarPanel rect
	}
	%VARS
	{
		old_solar = #$/MODULE[ModuleDeployableSolarPanel]/chargeRate$
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = #$/SOLAR[Rect]/len$
		@chargeRate *= #$/SOLAR[Rect]/wid$
		@chargeRate *= #$/SOLAR[Rect]/parts$
		@chargeRate *= #$@MM_VARS/WattsPerM2$
		@chargeRate /= #$@MM_VARS/SecondsPerHour$
	}
}

@PART[*]:HAS[@SOLAR[Circle]]:AFTER[zPhase4Electric]
{
	%ACTIONS
	{
		action = add ModuleDeployableSolarPanel circule
	}
	%VARS
	{
		old_solar = #$/MODULE[ModuleDeployableSolarPanel]/chargeRate$
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = #$/SOLAR[Circle]/dia$
		@chargeRate *= #$@MM_VARS/DiamToRadius$
		@chargeRate != #$@MM_VARS/Squared$
		@chargeRate *= #$@MM_VARS/PI$
		@chargeRate *= #$@MM_VARS/WattsPerM2$
		@chargeRate /= #$@MM_VARS/SecondsPerHour$
	}
}

@PART[*]:HAS[@SOLAR[Arc]]:AFTER[zPhase4Electric]
{
	%ACTIONS
	{
		action = add ModuleCurvedSolarPanel
	}
	%VARS
	{
		old_solar = #$/MODULE[ModuleCurvedSolarPanel]/TotalEnergyRate$
	}
	@MODULE[ModuleCurvedSolarPanel]
	{
		@TotalEnergyRate = #$/SOLAR[Arc]/dia$
		@TotalEnergyRate *= #$@MM_VARS/PI$
		@TotalEnergyRate *= #$/SOLAR[Arc]/hgt$
		@TotalEnergyRate *= #$/SOLAR[Arc]/parts$
		@TotalEnergyRate /= #$/SOLAR[Arc]/arcs$
		@TotalEnergyRate *= #$@MM_VARS/WattsPerM2$
		@TotalEnergyRate /= #$@MM_VARS/SecondsPerHour$
	}
}
