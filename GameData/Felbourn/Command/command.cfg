
@PART[*]:Final
{
	!MODULE[ModuleCommand] {}
	!MODULE[ModuleSAS] {}
	!MODULE[ModuleSPU] {}
    !MODULE[MechJebCore] {}
}

@PART[*]:HAS[#commandWatts[*]]:Final
{
	%ACTIONS
	{
		action = add command, SAS, SPU, and MJ
	}
	MODULE
	{
		name = ModuleCommand
		RESOURCE
		{
			name = ElectricCharge
			rate = #$/commandWatts$
			@rate /= #$@MM_VARS/SecondsPerHour$
		}
	}
	MODULE
	{
		name = ModuleSAS
	}
	MODULE
	{
		name = ModuleSPU
	}
	RESOURCE
	{
		name = ElectricCharge
		amount = #$/commandWatts$
		@amount *= #$/batteryBackup$
		maxAmount = #$amount$
	}

    MODULE
    {
    	name = MechJebCore
    	blacklist = MechJebModuleAscentAutopilot
    	@blacklist ^= :$: MechJebModuleAscentGuidance:
    	@blacklist ^= :$: MechJebModuleAscentPathEditor:
      	@blacklist ^= :$: MechJebModuleAttitudeAdjustment:
    	@blacklist ^= :$: MechJebModuleDockingAutopilot:
    	@blacklist ^= :$: MechJebModuleDockingGuidance:
   		@blacklist ^= :$: MechJebModuleLandingAutopilot:
    	@blacklist ^= :$: MechJebModuleLandingGuidance:
    	@blacklist ^= :$: MechJebModuleLandingPredictions:
    	@blacklist ^= :$: MechJebModuleRCSBalancer:
    	@blacklist ^= :$: MechJebModuleRCSBalancerWindow:
    	@blacklist ^= :$: MechJebModuleRCSController:
    	@blacklist ^= :$: MechJebModuleRendezvousAutopilot:
    	@blacklist ^= :$: MechJebModuleRendezvousAutopilotWindow:
    	@blacklist ^= :$: MechJebModuleRoverController:
    	@blacklist ^= :$: MechJebModuleRoverWindow:
    	@blacklist ^= :$: MechJebModuleSmartRcs:
    	@blacklist ^= :$: MechJebModuleSolarPanelController:
    	@blacklist ^= :$: MechJebModuleSpaceplaneAutopilot:
    	@blacklist ^= :$: MechJebModuleSpaceplaneGuidance:
    	@blacklist ^= :$: MechJebModuleTranslatron:
    	@blacklist ^= :$: MechJebModuleWarpController:
    	@blacklist ^= :$: MechJebModuleWarpHelper:

        RESOURCE
        {
        	name = ElectricCharge
            rate = 0.001
        }
    }	
}
