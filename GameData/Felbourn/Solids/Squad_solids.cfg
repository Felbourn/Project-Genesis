
//-------------------------------------------------------------------------------------------------
// BACC "Thumper" Solid Fuel Booster
@PART[solidBooster1-1]:Final
{
	@title ^= : FIX ME::
	MODULE
	{
		name = ModuleFuelTanks
		type = Solid
		MFT_dia = 1.25
		MFT_hgt = 6.5
//		volume = 3670 // base * 4.475
	}
	@MODULE[ModuleFuelTanks]
	{
		volume = #$MFT_dia$
		@volume *= #$@MM_VARS/DiamToRadius$
		@volume != #$@MM_VARS/Squared$
		@volume *= #$@MM_VARS/PI$
		@volume *= #$MFT_hgt$
		@volume *= #$@MM_VARS/LitersPerCM$
		@volume *= #$@MM_VARS/SolidFuelUtil$
	}

	@EFFECTS
	{
		@powerflame
		{
			!MODEL_MULTI_PARTICLE_PERSIST {}
			MODEL_MULTI_PARTICLE_PERSIST			
			{
				name = flamethrust
				modelName = MP_Nazari/FX/flamebooster2
				transformName = thrustTransform
				fixedEmissions = false

				emission = 0.0 0.0
				emission = 0.01 0.25
				emission = 0.02 0.30
				emission = 1.0 1.3

				speed = 0.0 0.8
				speed = 1.0 1.5

				energy = 0.0 2
				energy = 1.0 1.1

				offset = 0 -0.10
				offset = 1 -0.25

				size
				{
					density = 0 3
					density = 1 1
					density = 10 0
				}
				offset
				{
					density = 0 0.10
					density = 1 -0.25
					density = 10 0
				}
			}
		}
	}
}
@PART[solidBooster1-1]:Final
{
	@mass = #$/MODULE[ModuleFuelTanks]/volume$
	@mass *= #$@MM_VARS/SolidMassPerLiter$
	@mass /= #$@MM_VARS/KgPerTon$
}
@PART[solidBooster1-1]:Final
{
	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesRF
		@maxThrust = #$/mass$
		@maxThrust *= #$@MM_VARS/SolidTWR$
		@maxThrust *= #$@MM_VARS/Gravity$
		@maxThrust /= #$@MM_VARS/KgPerTon$
		@PROPELLANT[SolidFuel]
		{
			@name = HTPB
		}
	}
	%MODULE[ModuleEngineConfigs]
	{
		type = ModuleEnginesRF
		configuration = Linear
		CONFIG
		{
			name = Linear
			minThrust = 0
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			chamberNominalTemp = 1800
			maxEngineTemp = 2050
			PROPELLANT
			{
				name = HTPB
				ratio = 1
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 182
				key = 1 151
				key = 3 0.001
			}
			curveResource = HTPB
			thrustCurve
			{
				key = 0.00 0.01
				key = 0.02 0.01
				key = 0.03 0.16
				key = 0.06 0.32
				key = 1.00 1.00
			}
		}
		CONFIG
		{
			name = MaxQ
			minThrust = 0
			maxThrust = #$/MODULE[ModuleEnginesRF]/maxThrust$
			chamberNominalTemp = 1800
			maxEngineTemp = 2050
			PROPELLANT
			{
				name = HTPB
				ratio = 1
				DrawGauge = True
			}
			atmosphereCurve
			{
				key = 0 182
				key = 1 151
				key = 3 0.001
			}
			curveResource = HTPB
			thrustCurve
			{
				key = 0.00 0.01
				key = 0.02 0.01
				key = 0.03 0.16
				key = 0.04 0.20
				key = 0.60 0.99
				key = 0.80 0.60
				key = 0.94 1.00
				key = 1.00 0.90
			}
		}
	}
}
