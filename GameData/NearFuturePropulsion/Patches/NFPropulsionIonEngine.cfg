// ModuleManager cfg for nerfing the stock ion engine and adding effects to it

@PART[ionEngine]:FOR[NearFuturePropulsion]
{
    @cost = 5300
    @mass = 0.20
    @MODULE[ModuleEngines]
    {
        @name = ModuleEnginesFX
        @maxThrust = 1.3
        @heatProduction = 8.0625
        @PROPELLANT[XenonGas]
        {
		DrawGauge = True
            @ratio = 0.1
        }
        @PROPELLANT[ElectricCharge]
        {
            
            @ratio = 3.70290
        }
        @atmosphereCurve
        {
            @key,0 = 0 3800
            @key,1 = 1 100
            @key,2 = 4 0.01
        }
    }
}

@PART[ionEngine]:AFTER[NearFuturePropulsion]:NEEDS[!MP_Nazari]
{
    EFFECTS
    {
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = NearFuturePropulsion/Sounds/IonXenonOn
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = thrustTransform
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = NearFuturePropulsion/Sounds/GenericFlameout
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        exhaust
	{
            AUDIO
            {
                channel = Ship
                clip = NearFuturePropulsion/Sounds/IonXenonLoop01
                volume = 0.0 0.0 
                volume = 0.01 0.1
                volume = 0.5 0.2 
                volume = 1.0 0.4 
                pitch = 0.0 0.6 
                pitch = 0.5 0.7
                pitch = 1.0 1.0 
                loop = true
            }
            MODEL_MULTI_PARTICLE
            {
                modelName = NearFuturePropulsion/FX/hipepplume
                transformName = thrustTransform
                emission = 0.0 0.0
                emission = 0.01 0.1
                emission = 0.075 0.25
                emission = 1.0 1.0
                speed = 0.0 0.35
                speed = 1.0 1.0
            }
        }
    }
    @MODULE[ModuleEnginesFX]
    {
        runningEffectName = exhaust
    }
}